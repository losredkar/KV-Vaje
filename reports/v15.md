Vprašanja:

Zakaj GPG ne zazna MITM napada samodejno?
Ker ne ve komu lahko zaupa in komu ne. To je naša naloga. 

Kaj je fingerprint in zakaj je pomemben?


Zakaj e-pošta ni varen kanal za izmenjavo ključev?


Kako Web of Trust zmanjša tveganje MITM napada?





┌──(lukao㉿kali)-[~/v14]
└─$  gpg --full-generate-key    
gpg (GnuPG) 2.4.8; Copyright (C) 2025 g10 Code GmbH
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Please select what kind of key you want:
   (1) RSA and RSA
   (2) DSA and Elgamal
   (3) DSA (sign only)
   (4) RSA (sign only)
   (9) ECC (sign and encrypt) *default*
  (10) ECC (sign only)
  (14) Existing key from card
Your selection? 1
RSA keys may be between 1024 and 4096 bits long.
What keysize do you want? (3072) 4096
Requested keysize is 4096 bits
Please specify how long the key should be valid.
         0 = key does not expire
      <n>  = key expires in n days
      <n>w = key expires in n weeks
      <n>m = key expires in n months
      <n>y = key expires in n years
Key is valid for? (0) 365
Key expires at Thu 17 Dec 2026 11:12:37 AM EST
Is this correct? (y/N) y

GnuPG needs to construct a user ID to identify your key.

Real name: Dan
Email address: dan@gmail.com
Comment: DanPub1
You selected this USER-ID:
    "Dan (DanPub1) <dan@gmail.com>"

Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? o
We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
gpg: revocation certificate stored as '/home/lukao/.gnupg/openpgp-revocs.d/3AE895E07BF9862D5EBA89569EABDE20EB4DDAD8.rev'
public and secret key created and signed.

pub   rsa4096 2025-12-17 [SC] [expires: 2026-12-17]
      3AE895E07BF9862D5EBA89569EABDE20EB4DDAD8
uid                      Dan (DanPub1) <dan@gmail.com>
sub   rsa4096 2025-12-17 [E] [expires: 2026-12-17]


┌──(lukao㉿kali)-[~/v14]
└─$ gpg --list-keys
gpg: checking the trustdb
gpg: marginals needed: 3  completes needed: 1  trust model: pgp
gpg: depth: 0  valid:   3  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 3u
gpg: next trustdb check due at 2026-12-17
/home/lukao/.gnupg/pubring.kbx
------------------------------
pub   rsa4096 2025-12-17 [SC] [expires: 2028-12-16]
      755BAB25F40D265E540A1815A73C009984146670
uid           [ultimate] Luka (Kljuc1) <test1@gmail.com>
sub   rsa4096 2025-12-17 [E] [expires: 2028-12-16]

pub   rsa4096 2025-12-17 [SC] [expires: 2026-12-17]
      069793252FC4C92EE592F126C39608777FE2619A
uid           [ unknown] RobiKV Test (KV-Vaje) <robikv@kv.test>
sub   rsa4096 2025-12-17 [E] [expires: 2026-12-17]

pub   rsa4096 2025-12-17 [SC] [expires: 2026-12-17]
      7A07A36CA0630439F17F2969DEC76DA0B8AF8332
uid           [ultimate] Ava (AvaPub1key) <ava@gmail.com>
sub   rsa4096 2025-12-17 [E] [expires: 2026-12-17]

pub   rsa4096 2025-12-17 [SC] [expires: 2026-12-17]
      3AE895E07BF9862D5EBA89569EABDE20EB4DDAD8
uid           [ultimate] Dan (DanPub1) <dan@gmail.com>
sub   rsa4096 2025-12-17 [E] [expires: 2026-12-17]


┌──(lukao㉿kali)-[~/v14]
└─$ gpg --fngerprint test1@gmail.com                                                                                                                                                                               
gpg: invalid option "--fngerprint"

┌──(lukao㉿kali)-[~/v14]
└─$ gpg --fingerprint test1@gmail.com                                                                                                                                                                              
pub   rsa4096 2025-12-17 [SC] [expires: 2028-12-16]
      755B AB25 F40D 265E 540A  1815 A73C 0099 8414 6670
uid           [ultimate] Luka (Kljuc1) <test1@gmail.com>
sub   rsa4096 2025-12-17 [E] [expires: 2028-12-16]


┌──(lukao㉿kali)-[~/v14]
└─$ gpg --fingerprint ava@gmail.com                                                                                                                                                                           
pub   rsa4096 2025-12-17 [SC] [expires: 2026-12-17]
      7A07 A36C A063 0439 F17F  2969 DEC7 6DA0 B8AF 8332
uid           [ultimate] Ava (AvaPub1key) <ava@gmail.com>
sub   rsa4096 2025-12-17 [E] [expires: 2026-12-17]


┌──(lukao㉿kali)-[~/v14]
└─$ gpg --fingerprint dan@gmail.com                                                                                                                                                                             
pub   rsa4096 2025-12-17 [SC] [expires: 2026-12-17]
      3AE8 95E0 7BF9 862D 5EBA  8956 9EAB DE20 EB4D DAD8
uid           [ultimate] Dan (DanPub1) <dan@gmail.com>
sub   rsa4096 2025-12-17 [E] [expires: 2026-12-17]


┌──(lukao㉿kali)-[~/v14]
└─$ gpg --armor --export dan@gmail.com > ava_pubkey.asc                                                                                                                                                            

┌──(lukao㉿kali)-[~/v14]
└─$ echo "danov kljuc damo v file kot da je od ave"
danov kljuc damo v file kot da je od ave

┌──(lukao㉿kali)-[~/v14]
└─$ touch secret.txt

┌──(lukao㉿kali)-[~/v14]
└─$ echo "Skrivnostno sporocilo" > secret.txt 

┌──(lukao㉿kali)-[~/v14]
└─$ gpg --encrypt --recipient ava@gmail.com secret.txt 

┌──(lukao㉿kali)-[~/v14]
└─$ gpg --decrypt secret.txt.gpg                                                                                                                                                                                   
gpg: encrypted with rsa4096 key, ID 18DA04E18A78FED9, created 2025-12-17
      "Ava (AvaPub1key) <ava@gmail.com>"
Skrivnostno sporocilo

┌──(lukao㉿kali)-[~/v14]
└─$ ls
ava_pubkey.asc  dekriptiran3.txt  dekriptiran.txt  robi_pubkey.asc  secret.txt  secret.txt.gpg  sms1.txt  sms1.txt.asc  sms3.txt  sms3.txt.asc  sms.txt  sms.txt.asc  test1_Luka_pubkey.asc

┌──(lukao㉿kali)-[~/v14]
└─$ gpg --fingerprint ava@gmail.com                                                                                                                                                                                
pub   rsa4096 2025-12-17 [SC] [expires: 2026-12-17]
      7A07 A36C A063 0439 F17F  2969 DEC7 6DA0 B8AF 8332
uid           [ultimate] Ava (AvaPub1key) <ava@gmail.com>
sub   rsa4096 2025-12-17 [E] [expires: 2026-12-17]


┌──(lukao㉿kali)-[~/v14]
└─$ gpg --edit-key ava@gmail.com
gpg (GnuPG) 2.4.8; Copyright (C) 2025 g10 Code GmbH
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Secret key is available.

sec  rsa4096/DEC76DA0B8AF8332
     created: 2025-12-17  expires: 2026-12-17  usage: SC  
     trust: ultimate      validity: ultimate
ssb  rsa4096/18DA04E18A78FED9
     created: 2025-12-17  expires: 2026-12-17  usage: E   
[ultimate] (1). Ava (AvaPub1key) <ava@gmail.com>

gpg> trust
sec  rsa4096/DEC76DA0B8AF8332
     created: 2025-12-17  expires: 2026-12-17  usage: SC  
     trust: ultimate      validity: ultimate
ssb  rsa4096/18DA04E18A78FED9
     created: 2025-12-17  expires: 2026-12-17  usage: E   
[ultimate] (1). Ava (AvaPub1key) <ava@gmail.com>

Please decide how far you trust this user to correctly verify other users' keys
(by looking at passports, checking fingerprints from different sources, etc.)

  1 = I don't know or won't say
  2 = I do NOT trust
  3 = I trust marginally
  4 = I trust fully
  5 = I trust ultimately
  m = back to the main menu

Your decision? 5
Do you really want to set this key to ultimate trust? (y/N) y

sec  rsa4096/DEC76DA0B8AF8332
     created: 2025-12-17  expires: 2026-12-17  usage: SC  
     trust: ultimate      validity: ultimate
ssb  rsa4096/18DA04E18A78FED9
     created: 2025-12-17  expires: 2026-12-17  usage: E   
[ultimate] (1). Ava (AvaPub1key) <ava@gmail.com>

gpg> 

ce ne zelimo zaupati --> damo 2
gre za uspesen MTM napad (izvede Dan)
Ava in Luka to ugotovita s priemrjanjem fingerprintov